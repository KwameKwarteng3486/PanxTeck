<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather App</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
body {
    font-family: 'Poppins', sans-serif;
    background: url(image/4.JPG);
    background-repeat: no-repeat;
    background-size: cover;
    background-attachment: fixed;
    background-position: center;
    height: auto;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
}

.weather-container {
    background-color: rgba(0, 0, 0, 0.685);
    border-radius: 12px;
    text-align: center;
    border: 1.5px solid white;
}

input {
    font-size: 16px;
    border-radius: 26px;
}

button {
    padding: 10px 15px;
}

.weather-info {
    margin-top: 20px;
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
}

.weather-info.show {
    opacity: 1;
}

.weather-info h3 {
    margin-bottom: 10px;
    color: #333;
}

.weather-info img {
    margin-bottom: 10px;
    width: 80px;
}

.weather-info p {
    margin: 5px 0;
    font-size: 16px;
    color: #555;
}

.error-message {
    color: red;
    font-size: 16px;
    margin-top: 15px;
    transition: all 0.3s ease-in-out;
}

.forecast-day {
    background-color: #007bff;
    color: white;
    padding: 10px;
    border-radius: 8px;
    width: 100px;
    font-size: 14px;
    text-align: center;
    margin: 10px;
}

.form-control{
    border-radius: 10px;
    padding: 20px;
}

.forecast-day img {
    width: 40px;
    margin: 5px 0;
}

@media (max-width: 576px) {
    .forecast-day {
        width: 80px;
        font-size: 12px;
    }

    .weather-container {
        padding: 20px;
    }

    h2 {
        font-size: 1.5rem;
    }
}
    </style>
</head>
<body>

    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6 col-sm-8 col-12 text-center">
                <div class="weather-container p-4 shadow-sm rounded">
                    <a href="index.html" type="button" class="btn-close float-end text-danger me-3 fs-3" aria-label="Close" id="close-about" style="font-size: 35px; position: absolute; right: 50px;">&times;</a>
                    <h2 class="mb-4" style="color: #007bff; font-weight: bolder;">Weather App</h2>
                    <div class="input-group mb-3">
                        <input type="text" id="city" name="city" class="form-control" placeholder="Enter city (Kumasi, GH)">
                    </div>
                    <div class="input-group-append">
                        <button class="btn btn-primary ms-3" onclick="getWeather()">Get Weather</button>
                    </div>
                    <div id="error" class="error-message"></div>
                    <div class="weather-info text-dark" id="weatherInfo"></div>
                    <div class="forecast row" id="forecast"></div>
                </div>
                <div class="row">
                    <div class="col-12 text-center">
                        <h2 class="text-light">Select a City in Ghana</h2>
                        <div id="city-buttons" class="d-flex flex-wrap justify-content-center">
                            <button class="btn btn-primary m-2" onclick="getWeather('Accra')">Accra</button>
                            <button class="btn btn-primary m-2" onclick="getWeather('Kumasi')">Kumasi</button>
                            <button class="btn btn-primary m-2" onclick="getWeather('Tamale')">Tamale</button>
                            <button class="btn btn-primary m-2" onclick="getWeather('Takoradi')">Takoradi</button>
                            <button class="btn btn-primary m-2" onclick="getWeather('Cape Coast')">Cape Coast</button>
                            <button class="btn btn-primary m-2" onclick="getWeather('Koforidua')">Koforidua</button>
                            <button class="btn btn-primary m-2" onclick="getWeather('Ho')">Ho</button>
                            <button class="btn btn-primary m-2" onclick="getWeather('Sunyani')">Sunyani</button>
                            <button class="btn btn-primary m-2" onclick="getWeather('Bolgatanga')">Bolgatanga</button>
                            <button class="btn btn-primary m-2" onclick="getWeather('Wa')">Wa</button>
                            <button class="btn btn-primary m-2" onclick="getWeather('Techiman')">Techiman</button>
                            <button class="btn btn-primary m-2" onclick="getWeather('Sefwi Wiawso')">Sefwi Wiawso</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
  const apiKey = 'cba900866d2bfc4785e4c217a5a73ce5'; // Replace with your OpenWeatherMap API key

function getWeather(city = null) {
    const weatherInfo = document.getElementById('weatherInfo');
    const forecastDiv = document.getElementById('forecast');
    const errorDiv = document.getElementById('error');
    const inputCity = city || document.getElementById('city').value;

    weatherInfo.innerHTML = '';  // Clear previous info
    forecastDiv.innerHTML = '';  // Clear previous forecast
    errorDiv.innerHTML = '';     // Clear any error message

    if (!inputCity) {
        errorDiv.innerHTML = "Please enter a city.";
        return;
    }

    const cityQuery = `${inputCity}, GH`; // Use city with country code
    const weatherUrl = `https://api.openweathermap.org/data/2.5/weather?q=${cityQuery}&appid=${apiKey}&units=metric`;
    const forecastUrl = `https://api.openweathermap.org/data/2.5/forecast?q=${cityQuery}&appid=${apiKey}&units=metric`;

    // Fetch current weather
    fetch(weatherUrl)
        .then(response => response.json())
        .then(data => {
            if (data.cod === 200) {
                const temp = data.main.temp;
                const description = data.weather[0].description;
                const icon = data.weather[0].icon;
                const cityName = data.name;

                let rainMessage = '';
                if (description.includes('rain')) {
                    rainMessage = `<p>It's going to rain in ${cityName}.</p>`;
                } else {
                    rainMessage = `<p>No rain in ${cityName} at the moment.</p>`;
                }

                weatherInfo.innerHTML = `
                    <h3>${cityName}</h3>
                    <img src="https://openweathermap.org/img/wn/${icon}.png" alt="Weather icon">
                    <p>Temperature: ${temp}°C</p>
                    <p>Condition: ${description}</p>
                    ${rainMessage}
                `;

                weatherInfo.classList.add('show'); // Show weather info

                // Fetch 5-day forecast
                fetch(forecastUrl)
                    .then(response => response.json())
                    .then(forecastData => {
                        const dailyForecasts = forecastData.list.filter((reading) => reading.dt_txt.includes("12:00:00")); // Get data for 12 PM each day

                        dailyForecasts.forEach((day, index) => {
                            const forecastDay = new Date(day.dt_txt).toLocaleString('en-US', { weekday: 'short' });
                            const forecastIcon = day.weather[0].icon;
                            const forecastTemp = day.main.temp;

                            forecastDiv.innerHTML += `
                                <div class="forecast-day">
                                    <p>${forecastDay}</p>
                                    <img src="https://openweathermap.org/img/wn/${forecastIcon}.png" alt="Weather icon">
                                    <p>${forecastTemp}°C</p>
                                </div>
                            `;
                        });
                    })
                    .catch(error => {
                        errorDiv.innerHTML = "Error fetching 5-day forecast.";
                        console.error(error);
                    });

            } else {
                errorDiv.innerHTML = "City not found. Please try again.";
            }
        })
        .catch(error => {
            errorDiv.innerHTML = "Error fetching weather data. Check your connection.";
            console.error(error);
        });
}
    </script>
</body>
</html>
